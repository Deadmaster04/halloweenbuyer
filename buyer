-- Create the ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "PetShopGui"
screenGui.Parent = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")

-- Frame to hold the GUI elements
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 300, 0, 200)
mainFrame.Position = UDim2.new(0.5, -150, 0.5, -100)
mainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
mainFrame.Parent = screenGui

-- Title Label
local titleLabel = Instance.new("TextLabel")
titleLabel.Text = "Pet Buyer"
titleLabel.Size = UDim2.new(1, 0, 0, 30)
titleLabel.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
titleLabel.TextColor3 = Color3.new(1, 1, 1)
titleLabel.Parent = mainFrame

-- Start Button
local startButton = Instance.new("TextButton")
startButton.Text = "Buy Halloween Scarebear"
startButton.Size = UDim2.new(1, 0, 0, 40)
startButton.Position = UDim2.new(0, 0, 0, 40)
startButton.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
startButton.TextColor3 = Color3.new(1, 1, 1)
startButton.Parent = mainFrame

-- Status Label
local statusLabel = Instance.new("TextLabel")
statusLabel.Text = "Status: Idle"
statusLabel.Size = UDim2.new(1, 0, 0, 30)
statusLabel.Position = UDim2.new(0, 0, 0, 100)
statusLabel.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
statusLabel.TextColor3 = Color3.new(1, 1, 1)
statusLabel.Parent = mainFrame

-- Function to buy the pet
local function buyPet()
    statusLabel.Text = "Status: Buying..."
    
    -- Arguments for buying the pet
    local args = {
        [1] = "pets",
        [2] = "halloween_2024_scarebear",
        [3] = {}
    }

    -- Attempt to purchase the pet
    local success, errorMsg = pcall(function()
        game:GetService("ReplicatedStorage"):WaitForChild("API"):WaitForChild("ShopAPI/BuyItem"):InvokeServer(unpack(args))
    end)

    -- Update status based on the result
    if success then
        statusLabel.Text = "Status: Purchase Successful!"
    else
        statusLabel.Text = "Status: Error - " .. tostring(errorMsg)
    end
end

-- Connect the button click to the buy function
startButton.MouseButton1Click:Connect(buyPet)
